--- layout: compress ---
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Powderhouse Studios{% if page.title %} â€” {{ page.title | strip_html }}{% endif %}</title>
    <meta name="description" content="Powderhouse Studios">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/tachyons.min.css">
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/fonts.css">
    <link rel="icon" type="image/png" href="/assets/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/assets/favicon-16x16.png" sizes="16x16" />
    <link rel="author" href="/humans.txt" />
</head>

<body {% if page.slug %}data-slug='{{ page.slug}}' {% endif %} class='bg-near-white near-black'>
    <header class='pa4-ns pa3-m pa2 pb4-ns pb3'>
        {% include header.html %}
    </header>
    <main class='lh-copy pa4-ns pa2 pt0-ns pt1 f2-ns f3-m f4'>
        <section id='main-content'>
            {{ content }}
        </section>
        <section id="search-results" class='dn'>
            {% raw %}
            <script type="text/html" id="search-result-template">
                <div class="search-result f3 pb4 pt4 bb b--moon-gray">
                    <a href='{{{ _highlightResult.url }}}' class='url link dim blue'>ðŸ”— powderhouse.org{{{ _highlightResult.url }}}</a> â€”Â  {{{_highlightResult.text.value}}}
                </div>
            </script>
            {% endraw %}
        </section>
    </main>
    <footer>
        {% include footer.html %}
    </footer>
    <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/instantsearch.js/1/instantsearch.min.css">
    <script>
    // To clear the placeholder value in the search of the input
    let siteSearch = document.querySelector('#site-search');
    let searchPlaceholder = siteSearch.getAttribute('placeholder');

    siteSearch.addEventListener('focus', function(event) {
        event.target.setAttribute('placeholder', '');
    });

    // Replace the placeholder if empty
    siteSearch.addEventListener('focusout', function(event) {
        event.target.setAttribute('placeholder', searchPlaceholder);
    });
    </script>
    <script async src="https://cdn.jsdelivr.net/instantsearch.js/1/instantsearch.min.js"></script>
    <script async src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearchLite.min.js"></script>
    <script>
    var client = algoliasearch("NURLHE71FW", "9d236b5579a1d28471308567f57e76c3");
    var index = client.initIndex('prod_powderhouse.org');

    var search = instantsearch({
        // Replace with your own values
        appId: 'NURLHE71FW',
        apiKey: 'ad58cc2a3f1b18ae54da181fe189ad6c', // search only API key, no ADMIN key
        indexName: 'prod_powderhouse.org',
        urlSync: false
    });

    search.addWidget(
        instantsearch.widgets.searchBox({
            container: '#site-search'
        })
    );

    search.addWidget(
        instantsearch.widgets.hits({
            container: '#search-results',
            hitsPerPage: 100,
            transformData: {
                item: function(d) {
                    if (d._highlightResult.text.value) {
                        d._highlightResult.text.value = d._highlightResult.text.value.replace('ï¿½', '');
                    }
                    if (d.hasOwnProperty('url') && !d._highlightResult.hasOwnProperty('url')) {
                        d._highlightResult.url = d.url;
                    }
                    return d;
                }
            },
            templates: {
                item: document.querySelector('#search-result-template').innerHTML,
                empty: "We didn't find any results for the search <em>\"{{query}}\"</em>"
            }
        })
    );
    search.start();
    </script>
    <script>
    function hide(element) {
        element.classList.add('dn');
    }

    function show(element) {
        element.classList.remove('dn');
    }
    let mainContent = document.querySelector('#main-content');
    let searchResults = document.querySelector('#search-results');
    let searchInput = document.querySelector('#site-search');
    searchInput.addEventListener('input', function(event) {
        if (searchInput.value.length > 0) {
            hide(mainContent);
            show(searchResults);
        } else {
            hide(searchResults);
            show(mainContent);
        }
    });
    </script>
    {% include ga-snippet.html %}
    {% include drift-snippet.html %}
</body>

</html>